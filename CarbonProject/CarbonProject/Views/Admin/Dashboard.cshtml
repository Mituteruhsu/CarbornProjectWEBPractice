@model CarbonProject.Models.HomeIndexViewModel
@{
    Layout = "_LayoutAdmin";
    ViewData["Title"] = "管理者儀表板";
}

<h2>管理者儀表板</h2>

<!-- 統計卡片 -->
<div class="row g-4">
    <div class="col-md-3">
        <div class="card shadow-sm border-0 bg-primary text-white">
            <div class="card-body">
                <h6 class="card-title text-uppercase fw-bold">企業總數</h6>
                <h2 class="fw-bolder">@Model.TotalCompanies</h2>
                <p class="mb-0"><i class="bi bi-building"></i> 已註冊企業</p>
            </div>
        </div>
    </div>

    <div class="col-md-3">
        <div class="card shadow-sm border-0 bg-success text-white">
            <div class="card-body">
                <h6 class="card-title text-uppercase fw-bold">會員總數</h6>
                <h2 class="fw-bolder">@Model.TotalMembers</h2>
                <p class="mb-0"><i class="bi bi-people"></i> 已建立帳號</p>
            </div>
        </div>
    </div>

    <div class="col-md-3">
        <div class="card shadow-sm border-0 bg-warning text-white">
            <div class="card-body">
                <h6 class="card-title text-uppercase fw-bold">活躍會員</h6>
                <h2 class="fw-bolder">@Model.ActiveMembers</h2>
                <p class="mb-0"><i class="bi bi-lightning"></i> 最近登入過的用戶</p>
            </div>
        </div>
    </div>

    <div class="col-md-3">
        <div class="card shadow-sm border-0 bg-info text-white">
            <div class="card-body">
                <h6 class="card-title text-uppercase fw-bold">最近 7 日登入</h6>
                <h2 class="fw-bolder">@Model.RecentLogins</h2>
                <p class="mb-0"><i class="bi bi-calendar-week"></i> 登入次數</p>
            </div>
        </div>
    </div>
</div>

<!-- 分隔線 -->
<hr class="my-3" />

<!-- 圖表區（可未來接 Chart.js） -->
<div class="row">
    <div class="col-md-6">
        <div class="card shadow-sm border-1 border-success h-100 bg-transparent">
            <div class="card-header d-flex justify-content-between align-items-center mb-2">
                <span class="fw-bold"><i class="bi bi-bar-chart"></i> 登入趨勢</span>

                <div class="btn-group" role="group" aria-label="trend-range">
                    <button type="button" class="btn btn-sm btn-outline-secondary trend-range-btn active" data-days="7">7日</button>
                    <button type="button" class="btn btn-sm btn-outline-secondary trend-range-btn" data-days="15">15日</button>
                    <button type="button" class="btn btn-sm btn-outline-secondary trend-range-btn" data-days="30">30日</button>
                </div>
            </div>
            <div class="card-body text-center">
                <canvas id="loginTrendChart" class="chartjs" style="height:250px;" data-url="@Url.Action("GetLoginTrend", "Home")?days=7"></canvas>
            </div>
        </div>
    </div>

    <div class="col-md-6">
        <div class="card shadow-sm border-1 border-success h-100 bg-transparent">
            <div class="card-header fw-bold">
                <i class="bi bi-clipboard-data"></i> 活動紀錄（範例資料）
            </div>
            <div class="card-body p-0" style="max-height: 300px; overflow-y: auto;">
                <table class="table table-hover align-middle" style="border-collapse: separate; border-spacing: 0;">
                    <thead class="table table-secondary" style="position: sticky; top: 0; z-index: 1;">
                        <tr>
                            <th>時間</th>
                            <th>使用者</th>
                            <th>動作</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var act in Model.RecentActivities)
                        {
                            <tr>
                                <td>@act.ActionTime.ToString("yyyy/MM/dd HH:mm")</td>
                                <td>@act.Username</td>
                                <td>@act.Action</td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>