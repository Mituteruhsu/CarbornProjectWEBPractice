@model CarbonProject.Models.EFModels.RBAC.User

@{
    Layout = "_LayoutAdmin";
    ViewData["Title"] = "使用者詳細資料";
}

<h2 class="mb-4">使用者詳細資料</h2>

<div class="card p-4 shadow">

    <h4>基本資訊</h4>
    <hr />
    <div class="row mb-3">
        <div class="col-md-4"><strong>帳號：</strong> @Model.Username</div>
        <div class="col-md-4"><strong>Email：</strong> @Model.Email</div>
        <div class="col-md-4"><strong>姓名：</strong> @Model.FullName</div>
    </div>

    <div class="row mb-3">
        <div class="col-md-4"><strong>性別：</strong> @Model.Gender</div>
        <div class="col-md-4"><strong>生日：</strong> @Model.Birthday?.ToString("yyyy-MM-dd")</div>
        <div class="col-md-4"><strong>電話：</strong> @Model.PhoneNumber</div>
    </div>

    <h4 class="mt-4">帳號狀態</h4>
    <hr />
    <div class="row mb-3">
        <div class="col-md-4">
            <strong>啟用狀態：</strong>
            @(Model.IsActive ? "啟用" : "停用")
        </div>
        <div class="col-md-4"><strong>最後登入：</strong> @Model.LastLoginAt</div>
        <div class="col-md-4"><strong>最後登出：</strong> @Model.LastLogoutAt</div>
    </div>

    <div class="row mb-3">
        <div class="col-md-4"><strong>登入錯誤次數：</strong> @Model.FailedLoginAttempts</div>
        <div class="col-md-4"><strong>最後錯誤登入：</strong> @Model.LastFailedLoginAt</div>
    </div>

    <h4 class="mt-4">RBAC 資訊</h4>
    <hr />
    <div class="row mb-3">
        <div class="col-md-4">
            <strong>角色：</strong>
            @foreach (var r in Model.UserRoles)
            {
                <span class="badge bg-primary me-1">@r.Role.RoleName</span>
            }
        </div>

        <div class="col-md-4">
            <strong>公司：</strong>
            @Model.Company?.CompanyName
        </div>
    </div>

    <h4 class="mt-4">進階資料</h4>
    <hr />

    <div class="row mb-3">
        <div class="col-md-4"><strong>會員等級：</strong> @Model.MembershipLevel</div>
        <div class="col-md-4"><strong>點數：</strong> @Model.Points</div>
    </div>

    <div class="row mb-3">
        <div class="col-md-8"><strong>地址：</strong> @Model.Address</div>
    </div>

    @if (!string.IsNullOrEmpty(Model.ProfileImage))
    {
        <div class="mb-3">
            <strong>大頭照：</strong><br />
            <img src="@Model.ProfileImage" width="150" class="rounded shadow" />
        </div>
    }

</div>

<a href="/RBAC/Users" class="btn btn-secondary mt-3">返回列表</a>
